# 📋 사내 통합 게시판 PRD (Product Requirements Document)

## 🎯 프로젝트 개요

### 기본 정보
- **제품명**: 사내 통합 게시판 (공식 + 익명)
- **목적**: 사내 커뮤니케이션 플랫폼 (공식 공지 + 익명 의견 교환)
- **대상**: 회사 직원들
- **플랫폼**: 웹앱 (모바일 반응형)
- **기술 스택**: Next.js + Supabase

### 핵심 컨셉
**"하나의 플랫폼, 두 가지 커뮤니케이션 방식"**
- **공식 게시판**: 공지사항, 부서별 소식, 회사 정책 등
- **익명 게시판**: 자유로운 의견, 건의사항, 일상 공유 등

---

## 🏗️ 시스템 아키텍처

### 게시판 구조
```
🏢 사내 통합 게시판
├── 📢 공식 게시판
│   ├── 📢 전체 공지사항 (모든 직원)
│   ├── 🏢 부서별 공지사항
│   │   ├── 개발팀 공지
│   │   ├── 마케팅팀 공지
│   │   └── 인사팀 공지
│   └── 👔 직급별 공지사항
│       ├── 임원진 공지
│       ├── 팀장급 공지
│       └── 사원급 공지
└── 🔒 익명 게시판
    ├── 🗣️ 자유게시판
    ├── 💡 건의사항
    ├── 😊 일상공유
    └── 😤 불만사항
```

---

## 🔐 인증 및 보안 시스템

### 사번 기반 인증
- **인증 방식**: 사번 + 비밀번호
- **이메일 인증**: 개인/회사 이메일 상관없음
- **익명성 보장**: 완전 익명 (IP 로깅 없음)
- **관리자 추적**: 필요시 사번으로만 확인 가능 (1명만 권한)

### 권한 관리
#### **부서장 권한**
- ✅ 본 부서 사원 등록/수정
- ✅ 본 부서 공지사항 작성
- ❌ 다른 부서 사원 정보 조회 불가
- ❌ 익명성 해제 권한 없음

#### **최종관리자 권한 (1명)**
- ✅ 모든 사원 정보 조회/수정
- ✅ 모든 사원 등록 승인/거부
- ✅ 익명성 해제 (필요시)
- ✅ 시스템 전체 관리

---

## 📊 데이터베이스 설계

### 핵심 테이블

#### 1. 사원 관리
```sql
-- 부서 정보
departments (id, name, created_at)

-- 직급 정보  
positions (id, name, level, created_at)

-- 사원 마스터 (부서장 등록, 최종관리자 승인)
employee_master (
    id, employee_id, name, email, 
    department_id, position_id, 
    is_active, status, 
    created_by, approved_by, 
    created_at, approved_at
)

-- 사용자 계정
users (
    id, employee_id, password_hash, 
    email_verified, last_login, created_at
)
```

#### 2. 게시판 관리
```sql
-- 게시판 카테고리
board_categories (id, name, type, created_at)

-- 공지사항
announcements (
    id, title, content, priority, 
    category_id, author_id, 
    created_at, updated_at
)

-- 익명 게시글
anonymous_posts (
    id, title, content, category_id, 
    author_employee_id, created_at, updated_at
)

-- 익명 댓글
anonymous_comments (
    id, post_id, content, 
    author_employee_id, created_at, updated_at
)
```

#### 3. 파일 관리
```sql
-- 첨부파일
attachments (
    id, file_name, file_path, 
    file_size, file_type, 
    announcement_id, created_at
)
```

#### 4. 알림 시스템
```sql
-- 알림 로그
notifications (
    id, user_id, type, title, content, 
    data, is_read, priority, 
    created_at, read_at
)

-- 키워드 알림 설정
keyword_alerts (
    id, user_id, keyword, 
    is_active, created_at
)

-- 알림 설정
notification_settings (
    id, user_id, email_notifications, 
    push_notifications, keyword_alerts, 
    announcement_alerts, created_at
)
```

---

## 🔔 실시간 알림 시스템

### 알림 종류
1. **공지사항 알림**
   - 🚨 긴급 공지: 즉시 팝업 + 푸시
   - 📢 일반 공지: 배지 알림
   - 🏢 부서별/👔 직급별: 대상자만

2. **키워드 알림 (익명게시판)**
   - 🔍 사용자당 5개까지 키워드 설정
   - 💬 매칭 시 알림 (내용 미노출)
   - 📱 실시간 푸시 알림

3. **시스템 알림**
   - ✅ 사원 등록 승인/거부
   - 🔒 보안 관련 알림

### 알림 우선순위
1. 🚨 **긴급**: 즉시 팝업 + 진동 + 소리
2. 🔴 **높음**: 팝업 + 배지
3. 📢 **보통**: 배지만
4. 🔵 **낮음**: 알림 목록에만 표시

---

## 🎨 UI/UX 설계

### 메인 화면
```
┌─────────────────────────────────┐
│ 🏢 사내게시판    🔒 익명게시판   │ ← 탭 전환
├─────────────────────────────────┤
│ 📢 전체공지 (3) 🚨 긴급         │
│ 🏢 개발팀공지 (1)              │
│ 👔 팀장급공지 (0)              │
│                                 │
│ [새 공지 작성] (관리자만)        │
└─────────────────────────────────┘
```

### 익명게시판 접속 시 주의문구
```
┌─────────────────────────────────┐
│ ⚠️  익명게시판 이용 시 주의사항  │
├─────────────────────────────────┤
│ 🔒 익명게시판은 자유로운 의견    │
│    교환을 위한 공간입니다.       │
│                                 │
│ ⚠️  하지만 다음 행위는 금지됩니다:│
│ • 지나친 비방 및 욕설           │
│ • 개인에 대한 마녀사냥          │
│ • 회사에 대한 근거 없는 비난    │
│ • 기타 부적절한 내용            │
│                                 │
│ 📋 관리자는 필요시 작성자를      │
│    확인할 수 있으니 주의하시기   │
│    바랍니다.                    │
│                                 │
│ [취소]        [확인하고 입장]    │
└─────────────────────────────────┘
```

### 모바일 최적화
- **하단 탭**: 공식/익명 게시판 전환
- **스와이프**: 게시판 간 빠른 이동
- **풀투리프레시**: 새 게시글 확인
- **터치 친화적**: 버튼 크기 최소 44px

---

## 📱 핵심 기능 명세

### 1. 공지사항 관리
- **우선순위**: 긴급/일반 2단계
- **파일 첨부**: 문서, 이미지 등 지원
- **댓글**: 없음 (읽기 전용)
- **대상 설정**: 전체/부서별/직급별

### 2. 익명게시판
- **완전 익명**: IP 로깅 없음
- **카테고리**: 자유/건의/일상/불만
- **댓글 시스템**: 익명 댓글 + 대댓글
- **반응 기능**: 좋아요/싫어요

### 3. 키워드 알림
- **설정 개수**: 사용자당 5개까지
- **알림 내용**: "새로운 게시글이 올라왔습니다" (내용 미노출)
- **실시간 푸시**: 웹앱 로그인 시 즉시 알림

### 4. 사원 관리
- **등록**: 부서장이 등록 → 최종관리자 승인
- **현재**: 수동 등록
- **향후**: HR 시스템/엑셀 파일 연동 예정

---

## 🚀 개발 단계별 계획

### 1단계: 기본 개발 (현재)
- [x] PRD 작성 및 요구사항 정의
- [x] 데이터베이스 스키마 설계
- [x] 인증 시스템 설계
- [x] 알림 시스템 설계
- [ ] 프로젝트 초기 설정 (Next.js + Supabase)
- [ ] 데이터베이스 테이블 생성
- [ ] 기본 UI 컴포넌트 개발
- [ ] 인증 시스템 구현
- [ ] 게시판 CRUD 기능

### 2단계: 고도화 (나중에)
- [ ] HR 시스템 연동
- [ ] 엑셀 파일 업로드 기능
- [ ] 자동 승인 워크플로우
- [ ] 고급 알림 기능
- [ ] 통계 대시보드

---

## 🛡️ 보안 및 정책

### 익명성 정책
- **완전 익명**: IP 주소 로깅 없음
- **사번 기반 추적**: 관리자만 필요시 사번으로 확인 가능
- **단일 관리자**: 익명성 해제 권한은 1명만 보유
- **감사 로그**: 관리자의 익명성 해제 행위 기록

### 사용자 정책
- **사번 검증**: 승인된 사번만 가입 가능
- **이메일 인증**: 개인/회사 이메일 상관없음
- **비밀번호 정책**: 최소 8자, 영문+숫자+특수문자

### 관리자 정책
- **부서장**: 본 부서 사원 관리만
- **최종관리자**: 시스템 전체 관리 (1명만)
- **권한 분리**: 익명성 해제는 최종관리자만

---

## 📈 성능 요구사항

### 응답 시간
- **페이지 로딩**: 3초 이내
- **알림 전송**: 1초 이내
- **검색 결과**: 2초 이내

### 동시 사용자
- **목표**: 100명 이상
- **최대**: 500명

### 파일 관리
- **이미지 최적화**: 자동 압축 및 리사이징
- **파일 크기 제한**: 10MB 이하
- **지원 형식**: JPG, PNG, PDF, DOC, XLS

---

## 🎯 성공 지표

### 사용성 지표
- **일일 활성 사용자**: 80% 이상
- **알림 읽음률**: 90% 이상
- **게시글 작성률**: 30% 이상

### 만족도 지표
- **사용자 만족도**: 4.5/5.0 이상
- **시스템 안정성**: 99.9% 이상
- **응답 시간**: 3초 이내 유지

---

## 📝 추가 고려사항

### 접근성
- **키보드 네비게이션**: 지원
- **스크린 리더**: 호환
- **색상 대비**: WCAG 2.1 AA 준수

### 다국어 지원
- **현재**: 한국어만
- **향후**: 영어 지원 예정

### 백업 및 복구
- **일일 백업**: 자동화
- **데이터 복구**: 24시간 이내
- **재해 복구**: 4시간 이내

---

## 📞 연락처 및 지원

### 개발팀
- **프로젝트 매니저**: [이름]
- **개발자**: [이름]
- **디자이너**: [이름]

### 사용자 지원
- **이메일**: support@company.com
- **전화**: 02-1234-5678
- **운영시간**: 평일 09:00-18:00

---

**문서 버전**: 1.0  
**최종 수정일**: 2024년 12월 19일  
**작성자**: AI Assistant  
**승인자**: [이름]
